<!DOCTYPE html>
<html lang="ko" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{% block title %}Tone-Bridge – 한국어 억양 학습 플랫폼{% endblock %}</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-56D78RCESE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-56D78RCESE', {
      debug_mode: true
    });
    
    // 디버깅을 위한 로그
    console.log('🔍 Google Analytics 초기화 완료 - ID: G-56D78RCESE');
    
    // 페이지 로드 시 이벤트 전송 확인
    window.addEventListener('load', function() {
      gtag('event', 'page_view', {
        page_title: document.title,
        page_location: window.location.href
      });
      console.log('📊 GA 페이지뷰 이벤트 전송:', document.title);
    });
  </script>
  <!-- Bootstrap (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome (CDN) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- Pretendard 폰트 -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" rel="stylesheet">

  <!-- Chart.js (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3"></script>
  <script>
    // annotation 플러그인 로드 후 등록
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof Chart !== 'undefined' && typeof window.chartjs !== 'undefined' && window.chartjs.annotation) {
        Chart.register(window.chartjs.annotation);
        console.log('🎯 Chart.js annotation 플러그인 등록 완료');
      } else if (typeof Chart !== 'undefined') {
        // 대안: UMD 방식으로 등록 시도
        setTimeout(function() {
          if (typeof Chart !== 'undefined' && Chart.registry && Chart.registry.plugins.get('annotation')) {
            console.log('🎯 Chart.js annotation 플러그인이 이미 등록되어 있습니다');
          }
        }, 100);
      }
    });
  </script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/static/css/custom.css" />

  {% block head %}{% endblock %}
</head>
<body>
  <!-- ToneBridge 헤드라인 -->
  <div class="py-5 mb-4" style="background: linear-gradient(135deg, #e67e22 0%, #d35400 100%); box-shadow: 0 4px 20px rgba(230, 126, 34, 0.25); position: relative;">
    <div class="container">
      <!-- 중앙 메인 콘텐츠 -->
      <div class="text-center">
        <h1 class="display-3 fw-bold mb-3" style="color: white; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; text-shadow: 0 3px 6px rgba(0,0,0,0.3);">
          <i class="fas fa-microphone me-3" style="color: white;"></i>
          Tone-Bridge
        </h1>
        <p class="lead mb-4" style="color: white; font-weight: bold; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; opacity: 0.95;">실시간 피드백 한국어 억양학습 솔루션 <span style="font-size: 0.95em;">데모ver.</span></p>
        <div class="text-end">
          <div class="mb-1" style="color: white; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; margin-top: 1.5rem;">
            <small style="font-weight: 600; font-size: 0.85rem;">THE소리LAB</small>
          </div>
          <div style="color: white; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;">
            <small style="font-style: italic; font-size: 0.8rem;">"당신만의 소리를 위해 끊임없이 연구합니다"</small>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Page container -->
  <main class="container-fluid px-2 py-4">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="border-top py-3">
    <div class="container-fluid px-2 small text-muted">
      © Tone-Bridge by THE소리LAB · 실시간 억양 피드백 데모
    </div>
  </footer>

  <!-- Bootstrap Bundle (JS) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Bootstrap 툴팁 초기화 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Bootstrap 툴팁 초기화
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });
  </script>

  <!-- App scripts -->
  <script src="/static/js/audio-analysis.js?v=1756279600" defer></script>

  {% block scripts %}{% endblock %}
</body>
</html>
